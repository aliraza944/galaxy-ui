(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{197:function(e,t,n){},198:function(e,t,n){},218:function(e,t,n){},353:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(89),s=n.n(c),o=(n(197),n(56)),i=(n.p,n(198),n(167)),l=n.n(i);console.log("process.env.REACT_APP_API_BASE","http://3.236.19.157:3000/");var d=l.a.create({baseURL:"http://3.236.19.157:3000/"});d.interceptors.response.use((function(e){return console.log("response succcess"),e}),(function(e){return console.log("API response error",e.message),Promise.resolve({error:e})})),d.defaults.headers.common=Object(o.a)(Object(o.a)({},d.defaults.headers.common),{},{"Content-Type":"application/json"}),d.defaults.preflightContinue=!0;var j=d,u=n(98),h=n(21),b=n(1),O=function(e){return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{children:[" ",Object(b.jsx)("a",{href:"#/country-insights",children:" Country Insights"})]}),Object(b.jsx)("span",{children:" || "}),Object(b.jsxs)("span",{children:[" ",Object(b.jsx)("a",{href:"#/live-events",children:" Live Events"})]})]}),Object(b.jsx)("main",{children:e.children})]})},p=n(23),x=n.n(p),g=n(37),f=n(18),v=n(369),m=(n(218),function(e){var t=Object(r.useState)(!1),n=Object(f.a)(t,2),a=n[0],c=n[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsxs)("table",{className:"",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Feature"}),Object(b.jsx)("th",{children:"Count"})]})}),Object(b.jsxs)("tbody",{children:[!a&&e.mappedFeatures.slice(0,10).map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.key}),Object(b.jsx)("td",{children:e.count})]},e.key+e.action)})),a&&e.mappedFeatures.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.key}),Object(b.jsx)("td",{children:e.count})]},e.key+e.action)}))]})]}),Object(b.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),c(!a)},children:a?"Show less":"Show all"})]})}),y=function(e){var t=Object(r.useState)("2021-08-27 09:00:00"),n=Object(f.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)("2021-08-27 11:00:00"),o=Object(f.a)(s,2),i=o[0],l=o[1],d=Object(r.useState)("11224,10042,9906,1381,11203,10681,8055,8732,11193,7305,11210,10985,10988,11190,6658,5644,10913,6495,4229"),u=Object(f.a)(d,2),h=u[0],O=u[1],p=Object(r.useState)("mapandchathour2021"),y=Object(f.a)(p,2),k=y[0],w=y[1],C=Object(r.useState)(null),F=Object(f.a)(C,2),_=F[0],S=F[1],E=Object(r.useState)(!1),M=Object(f.a)(E,2),T=(M[0],M[1],function(){var e=Object(g.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("calling /live_events"),t=encodeURI("/live_events/".concat(a,"/").concat(i,"/").concat(h,"/").concat(k||" ")),e.next=5,j.get(t);case 5:if(n=e.sent,console.log("res",n),!n.error){e.next=11;break}e.next=17;break;case 11:if(n){e.next=14;break}e.next=17;break;case 14:return S(n.data),console.log("res",n),e.abrupt("return",n.data);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("Custom Error",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}()),N=Object(v.a)(T),D=N.mutate,B=N.isLoading;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"live-event-style",children:[Object(b.jsx)("label",{children:"Event between"})," ",Object(b.jsx)("input",{type:"text",placeholder:"Start Date",disabled:B,value:a,onChange:function(e){c(e.target.value)}}),Object(b.jsx)("label",{children:"and"}),Object(b.jsx)("input",{type:"text",placeholder:"End Date",disabled:B,value:i,onChange:function(e){l(e.target.value)}}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("label",{children:[" ","Project Ids"," ",Object(b.jsxs)("div",{className:"tooltip",children:[" ",Object(b.jsx)("a",{href:"#",onClick:function(e){e.preventDefault()},className:"help",children:"?"}),Object(b.jsxs)("span",{className:"tooltiptext",children:["Project IDs as comma separated values. They will be used to filter the changesets based HOT TM standard hashtags (hotosm-project-PROJECT_ID)",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Filtering is done on the hashtags or the comment fields of a changeset"]})]})]}),Object(b.jsx)("textarea",{value:h,disabled:B,onChange:function(e){O(e.target.value)},placeholder:"Project IDs are entered here, ex: 11224,15985",rows:"8"})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("label",{children:["Hashtags"," ",Object(b.jsxs)("div",{className:"tooltip",children:[" ",Object(b.jsx)("a",{href:"#",onClick:function(e){e.preventDefault()},className:"help",children:"?"}),Object(b.jsx)("span",{className:"tooltiptext",children:"Add here any hashtag that is associated with the event, hashtags will be used to filter the changesets based on the hashtags or comment field"})]})]}),Object(b.jsx)("textarea",{value:k,disabled:B,onChange:function(e){w(e.target.value)},placeholder:"#mapandchathour2021",rows:"8"})]})]}),Object(b.jsx)("button",{onClick:function(){D(),console.log("call API")},disabled:""===a||""===i||""===h||B,children:"Refresh"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"Refreshing the insights might take ~ 15 seconds based on the event duration, number of projects and hashtags"}),B&&Object(b.jsxs)("div",{className:"lds-ring",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})]}),_&&!B&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:[" Total Contributors = ",_.contributersCount]}),Object(b.jsxs)("p",{children:["Total number of contributors who have mapped at least a feature during the specified time span and used one of the projects tags (hotosm-project-PROJECT_ID) or an event hashtag in their changeset",Object(b.jsx)("br",{}),"HOT TM users who have checked/opened TM task and didn't map are not counted"]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"table-left",children:Object(b.jsx)(m,{title:"Event Created Features",mappedFeatures:_.mappedFeatures.filter((function(e){return"create"===e.action}))})}),Object(b.jsx)("div",{className:"table-right",children:Object(b.jsx)(m,{title:"Event Modified Features",mappedFeatures:_.mappedFeatures.filter((function(e){return"modify"===e.action}))})})]})]})]})})},k=n(368),w=n(362),C=n(182),F=n(183),_=n(81),S=n(78),E=n(187),M=function(e){var t=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/key-stats/asia/Philippines/building");case 3:if(!(t=e.sent).error){e.next=7;break}return console.log("Error",t.error),e.abrupt("return");case 7:if(t){e.next=10;break}return console.log("No response"),e.abrupt("return");case 10:return console.log("res.data",t.data),e.abrupt("return",t.data);case 14:e.prev=14,e.t0=e.catch(0),console.log("Unexpected Error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n=Object(k.a)("fetchStats",t),r=n.data;n.refetch,new Date(2008,1,1),new Date(2021,7,31);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("select",{children:[Object(b.jsx)("option",{value:"africa",children:"Africa"}),Object(b.jsx)("option",{value:"asia",children:"Asia"}),Object(b.jsx)("option",{value:"africa",children:"Central America"}),Object(b.jsx)("option",{value:"africa",children:"South America"})]}),Object(b.jsx)("input",{type:"text",placeholder:"Country"}),Object(b.jsx)("input",{type:"text",placeholder:"Key"}),r&&Object(b.jsxs)(w.a,{data:r,width:1e3,height:300,margin:{left:20,right:10},children:[Object(b.jsx)(C.a,{dataKey:"by_month_osm",reversed:!0,tickFormatter:function(e){return new Date(e).getMonth()+"-"+new Date(e).getFullYear()}}),Object(b.jsx)(F.a,{domain:[0,12e6]}),Object(b.jsx)(_.a,{}),Object(b.jsx)(S.a,{}),Object(b.jsx)(E.a,{type:"monotone",dataKey:"accmulative_total_hot",stroke:"#8884d8"}),Object(b.jsx)(E.a,{type:"monotone",dataKey:"accmulative_total_osm",stroke:"#82ca9d"})]})]})})},T=function(e){var t=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/loaded_countries");case 3:if(!(t=e.sent).error){e.next=7;break}return console.log("Error",t.error),e.abrupt("return");case 7:if(t){e.next=10;break}return console.log("No response"),e.abrupt("return");case 10:return console.log("loaded_countries",t.data),e.abrupt("return",t.data);case 14:e.prev=14,e.t0=e.catch(0),console.log("Unexpected Error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n=Object(k.a)("loadedCountries",t),r=n.data;n.isLoading;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{class:"w3-sidebar w3-light-grey w3-bar-block",children:[Object(b.jsx)("h3",{class:"w3-bar-item",children:"Loaded Countries"}),r&&r.map((function(e){return Object(b.jsx)("a",{class:"w3-bar-item w3-button",children:e.name_en},e.name_en)}))]})})},N=(n(353),function(e){var t=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/loaded_countries");case 3:if(!(t=e.sent).error){e.next=7;break}return console.log("Error",t.error),e.abrupt("return");case 7:if(t){e.next=10;break}return console.log("No response"),e.abrupt("return");case 10:return console.log("res.data",t.data),e.abrupt("return",t.data);case 14:e.prev=14,e.t0=e.catch(0),console.log("Unexpected Error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n=Object(k.a)("fetchLoadedCountries",t),r=n.data,a=n.isLoading;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("select",{defaultValue:"Select a country",onChange:e.onChange,children:[a&&Object(b.jsx)("option",{value:"Select a country",children:"Loading .."}),r&&!a&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("option",{value:"Select a country",children:"Select a country"}),r.map((function(e){return Object(b.jsx)("option",{value:e.name_en,children:e.name_en},e.name_en)}))]})]})})}),D=function(e){var t=Object(r.useState)(""),n=Object(f.a)(t,2),a=(n[0],n[1]),c=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/country-insights/".concat(t));case 3:if(!(n=e.sent).error){e.next=7;break}return console.log("Error",n.error),e.abrupt("return");case 7:if(n){e.next=10;break}return console.log("No response"),e.abrupt("return");case 10:return console.log("res.data",n.data),e.abrupt("return",n.data);case 14:e.prev=14,e.t0=e.catch(0),console.log("Unexpected Error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),s=Object(v.a)("fetchStats",c),o=s.mutate,i=s.data,l=s.isLoading;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T,{}),Object(b.jsxs)("div",{className:"country-insights",children:[Object(b.jsx)(N,{onChange:function(e){a(e.target.value),o(e.target.value)}}),l&&Object(b.jsx)("p",{children:"loading ..... "}),i&&i.countryBuildingsByMonth.length>0&&!l&&Object(b.jsxs)(w.a,{data:i.countryBuildingsByMonth,width:1e3,height:300,margin:{left:20,right:10},children:[Object(b.jsx)(C.a,{dataKey:"by_month",tickFormatter:function(e){return new Date(e).getMonth()+"-"+new Date(e).getFullYear()}}),Object(b.jsx)(F.a,{}),Object(b.jsx)(_.a,{}),Object(b.jsx)(S.a,{}),Object(b.jsx)(E.a,{type:"monotone",dataKey:"building_count",stroke:"#8884d8"}),Object(b.jsx)(E.a,{type:"monotone",dataKey:"tm_building_count",stroke:"#FF5555"})]}),i&&0===i.countryBuildingsByMonth.length&&Object(b.jsxs)("h3",{children:["Buildings are not yet calculated, contact hot tech team over"," ",Object(b.jsxs)("a",{href:"https://hotosm.atlassian.net/servicedesk/customer/portals",target:"_blank",children:[" ","here"," "]})]}),i&&i.countryBuildingsByMonth.length>0&&Object(b.jsxs)("div",{style:{textAlign:"left"},children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{style:{color:"#8884d8"},children:"building_count"}),": refers to the total mapped ways + relations in OSM that have tag building=*"]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{style:{color:"#FF5555"},children:"tm_building_count"}),": refers to the total mapped ways + relations in OSM that have tag building=* ",Object(b.jsx)("strong",{children:"and came through HOT TM"}),' using "hotosm" hashtag in the comments or hashtags of the changeset']})]}),i&&1===i.countryValidatedBuildings.length&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("h3",{children:[i.countryValidatedBuildings[0].validated_buildings," Validated buildings"]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{children:"Validated buildings"}),": refers to the total # of OSM elelemts ways + relations in OSM that is intersecting with the boundary of a validated task in HOT TM"]})]})]})]})};var B=Object(h.e)((function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("header",{children:[Object(b.jsx)("h1",{children:"OSM Galaxy"}),Object(b.jsx)("p",{children:"It is all about OSM"})]}),Object(b.jsx)(u.b,{children:Object(b.jsx)(O,{children:Object(b.jsxs)(r.Suspense,{fallback:"Loading",children:[Object(b.jsx)(h.a,{path:"/live-events",render:function(e){return Object(b.jsx)(y,Object(o.a)({},e))}}),Object(b.jsx)(h.a,{path:"/org-contribution",render:function(e){return Object(b.jsx)(M,Object(o.a)({},e))}}),Object(b.jsx)(h.a,{path:"/country-insights",render:function(e){return Object(b.jsx)(D,Object(o.a)({},e))}})]})})})]})})),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,370)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},A=n(367),I=n(92),L=new A.a;s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(I.a,{client:L,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(B,{})})})}),document.getElementById("root")),P()}},[[359,1,2]]]);
//# sourceMappingURL=main.ddaac836.chunk.js.map